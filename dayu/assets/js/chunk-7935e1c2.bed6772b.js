(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7935e1c2"],{1155:function(t,i,s){t.exports=s.p+"assets/img/img_non.8fe0bb95.png"},aa70:function(t,i,s){"use strict";var e=s("f7c1"),a=s.n(e);a.a},c66d:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"Profile"},[e("div",{staticClass:"head"},[e("img",{staticClass:"cover",attrs:{src:t.$url(t.user.photo)}}),e("div",{staticClass:"info"},[e("span",[t._v(t._s(t.user.nick))]),e("div",{staticClass:"info_num"},[e("div",[t._v("关注:"+t._s(t.user.followedCount))]),e("div",{staticClass:"ml20"},[t._v("粉丝:"+t._s(t.user.fansCount))])])]),t.uid==t.myUid?e("div",{staticClass:"follow",on:{click:function(i){t.editInfo()}}},[t._v("编辑资料")]):t.user.user_relation?e("div",{staticClass:"romoveRelation",on:{click:function(i){t.deleteRelation(t.uid)}}},[t._v("已关注")]):t.user.user_relation?t._e():e("div",{staticClass:"follow",on:{click:function(i){t.relation(t.uid)}}},[t._v("关注")])]),e("div",{staticClass:"desc"},[e("div",{staticClass:"desc_info"},[t._v(t._s(t.user.desc?"简介："+t.user.desc:"简介：这个人很懒，什么都没留下"))])]),e("mt-navbar",{model:{value:t.selected,callback:function(i){t.selected=i},expression:"selected"}},[e("mt-tab-item",{staticClass:"navbar",attrs:{id:"1"}},[e("span",[t._v("动态")])]),e("mt-tab-item",{staticClass:"navbar",attrs:{id:"2"}},[e("span",[t._v("文章")])])],1),e("mt-tab-container",{model:{value:t.selected,callback:function(i){t.selected=i},expression:"selected"}},[e("mt-tab-container-item",{attrs:{id:"1"}},[0==t.newList.length?e("div",{staticClass:"non"},[e("img",{attrs:{src:s("1155")}}),e("div",[t._v("暂时还没有数据哦～")])]):t._e(),e("mu-load-more",{staticClass:"feeds",attrs:{loading:t.loading},on:{load:t.loadMore}},t._l(t.newList,function(i,s){return e("div",{staticClass:"item_card",on:{click:function(s){t.goDetail(i.contentId)}}},[e("div",{staticClass:"item_user"},[e("img",{staticClass:"item_cover",attrs:{src:t.$url(t.user.photo)}}),e("div",{staticClass:"item_nick"},[t._v(t._s(t.user.nick))]),i.optTime?e("div",{staticClass:"item_time"},[t._v(t._s(t.formatTimeData(i.optTime)))]):e("div",{staticClass:"item_time"},[t._v(t._s(t.formatTimeData(i.createTime)))])]),1==i.optType?e("div",{staticClass:"item_opt"},[t._v("赞了文章")]):2==i.optType?e("div",{staticClass:"item_opt"},[t._v("赞赏了文章")]):t._e(),e("div",{staticClass:"item_info"},[i.coverPid?e("img",{staticClass:"item_img",attrs:{mode:"aspectFill",src:t.$url(i.coverPid)}}):t._e(),e("div",{staticClass:"item_content"},[t._v(t._s(i.title))])])])}))],1),e("mt-tab-container-item",{attrs:{id:"2"}},[0==t.hotList.length?e("div",{staticClass:"non"},[e("img",{attrs:{src:s("1155")}}),e("div",[t._v("暂时还没有数据哦～")])]):t._e(),e("mu-load-more",{staticClass:"feeds",attrs:{loading:t.loading},on:{load:t.loadMore}},t._l(t.hotList,function(i,s){return e("div",{staticClass:"item_card",on:{click:function(s){t.goDetail(i.contentId)}}},[e("div",{staticClass:"item_user"},[e("img",{staticClass:"item_cover",attrs:{src:t.$url(t.user.photo)}}),e("div",{staticClass:"item_nick"},[t._v(t._s(t.user.nick))]),i.optTime?e("div",{staticClass:"item_time"},[t._v(t._s(t.formatTimeData(i.optTime)))]):e("div",{staticClass:"item_time"},[t._v(t._s(t.formatTimeData(i.createTime)))])]),e("div",{staticClass:"item_opt"},[t._v("发表了文章")]),e("div",{staticClass:"item_info"},[i.coverPid?e("img",{staticClass:"item_img",attrs:{mode:"aspectFill",src:t.$url(i.coverPid)}}):t._e(),e("div",{staticClass:"item_content"},[t._v(t._s(i.title))])])])}))],1)],1)],1)},a=[],n={name:"Profile",data:function(){return{uid:this.$route.query.uid||"1070988726840066048",myUid:"",selected:"1",loading:!1,user:{photo:"",nick:"",followedCount:"",fansCount:"",user_relation:"",desc:""},newList:[],hotList:[]}},mounted:function(){this.myUid=this.$store.state.user.uid,this.queryProfile(),this.getNewList(),this.getHotList()},methods:{loadMore:function(){},queryProfile:function(){var t=this;this.$axios({method:"get",url:"/blockchain/v1/user/queryUserProfile",data:{uid:this.uid}}).then(function(i){i.data.status&&(t.user=i.data.data)}).catch(function(t){})},getNewList:function(){var t=this;this.loading=!0,this.$axios({method:"get",url:"/blockchain/v1/user/queryProfileUserFeeds",data:{next:this.next,uid:this.uid}}).then(function(i){t.loading=!1,i.data.status&&(t.next=i.data.data.next,t.newList=t.newList.concat(i.data.data.data))}).catch(function(i){t.loading=!1})},getHotList:function(){var t=this;this.loading=!0,this.$axios({method:"get",url:"/blockchain/v1/user/queryProfileContentsList",data:{next:this.next,uid:this.uid}}).then(function(i){t.loading=!1,i.data.status&&(t.next=i.data.data.next,t.hotList=t.hotList.concat(i.data.data.data))}).catch(function(i){t.loading=!1})},goDetail:function(t){this.$router.push({path:"/FeedDetail",query:{contentId:t}})},editInfo:function(){this.$router.push({path:"/EditProfile",query:{photo:this.user.photo,nick:this.user.nick,desc:this.user.desc}})},formatTimeData:function(t){var i=new Date,s="";return s=i.getTime()-t<6e4?"刚刚":i.getTime()-t<36e5?parseInt((i.getTime()-t)/1e3/60)+"分钟前":this.$formatDate(t,6),s},relation:function(t){var i=this;this.$ui.Indicator.open({text:"加载中...",spinnerType:"snake"}),this.$axios({method:"post",url:"/blockchain/v1/user/relation/add",data:{mainUserId:t}}).then(function(t){i.$ui.Indicator.close(),t.data.status&&(i.$ui.Toast("已关注"),i.user.user_relation=1)}).catch(function(t){i.$ui.Indicator.close()})},deleteRelation:function(t){var i=this;this.$ui.Indicator.open({text:"加载中...",spinnerType:"snake"}),this.$axios({method:"post",url:"/blockchain/v1/user/relation/delete",data:{mainUserId:t}}).then(function(t){i.$ui.Indicator.close(),t.data.status&&(i.$ui.Toast("已取消关注"),i.user.user_relation=0)}).catch(function(t){i.$ui.Indicator.close()})}}},o=n,c=(s("aa70"),s("2877")),r=Object(c["a"])(o,e,a,!1,null,"383fa0c7",null);r.options.__file="Profile.vue";i["default"]=r.exports},f7c1:function(t,i,s){}}]);